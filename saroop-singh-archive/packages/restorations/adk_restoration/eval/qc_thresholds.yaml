# Quality Control Thresholds for ADK Restoration System
# Defines acceptance criteria and quality gates

overall_thresholds:
  minimum_acceptable_score: 70
  good_quality_threshold: 80
  excellent_quality_threshold: 90

criteria_thresholds:
  preservation_of_original:
    critical_minimum: 75
    good_threshold: 85
    excellent_threshold: 95
    weight: 0.25
    
  defect_removal:
    critical_minimum: 60
    good_threshold: 80
    excellent_threshold: 95
    weight: 0.20
    
  enhancement_quality:
    critical_minimum: 65
    good_threshold: 75
    excellent_threshold: 90
    weight: 0.20
    
  naturalness:
    critical_minimum: 70
    good_threshold: 80
    excellent_threshold: 92
    weight: 0.20
    
  technical_quality:
    critical_minimum: 65
    good_threshold: 78
    excellent_threshold: 88
    weight: 0.15

failure_conditions:
  # Automatic rejection conditions
  critical_failures:
    - preservation_of_original < 70
    - overall_score < 50
    - any_criterion < 40
    
  # Conditions requiring manual review
  review_required:
    - preservation_of_original < 80 AND defect_removal < 70
    - naturalness < 75 AND enhancement_quality > 85
    - overall_score between 60-75

retry_conditions:
  # When to automatically retry with different parameters
  auto_retry:
    - overall_score between 55-69 AND attempts < 3
    - defect_removal < 70 AND defects_severe = true
    - enhancement_quality < 65 AND mode = "ENHANCE"
    
  # Parameter adjustment strategies
  retry_strategies:
    low_preservation:
      reduce_temperature: 0.1
      increase_conservation: true
      reduce_enhancement_steps: 1
      
    low_defect_removal:
      increase_defect_focus: true
      adjust_prompts: "more_specific"
      increase_iterations: 1
      
    low_naturalness:
      reduce_temperature: 0.15
      simplify_enhancements: true
      focus_on_authenticity: true

mode_specific_thresholds:
  RESTORE:
    preservation_of_original: 85
    naturalness: 80
    enhancement_quality: 65
    
  ENHANCE:
    enhancement_quality: 80
    technical_quality: 75
    preservation_of_original: 75
    
  REIMAGINE:
    enhancement_quality: 85
    technical_quality: 85
    preservation_of_original: 65

issue_severity_mapping:
  critical:
    threshold: 15
    action: "immediate_rejection"
    examples:
      - "face_distortion"
      - "historical_inaccuracy"
      - "complete_loss_of_detail"
      
  moderate:
    threshold: 10
    action: "retry_with_adjustment"
    examples:
      - "color_inconsistency"
      - "artificial_enhancement"
      - "partial_detail_loss"
      
  minor:
    threshold: 5
    action: "accept_with_notes"
    examples:
      - "slight_color_shift"
      - "minor_artifact"
      - "small_enhancement_artifact"

validation_rules:
  # Rules for step-by-step validation
  step_validation:
    improvement_required: 3  # minimum improvement score per step
    regression_limit: 5      # maximum quality loss per step
    
  # Rules for final validation
  final_validation:
    comprehensive_check: true
    cross_reference_original: true
    historical_accuracy_check: true
    
# Audit and logging requirements
audit_requirements:
  log_all_scores: true
  log_decision_reasoning: true
  log_parameter_adjustments: true
  capture_intermediate_results: true
  
reporting:
  include_score_breakdown: true
  include_improvement_metrics: true
  include_issue_summary: true
  include_recommendations: true